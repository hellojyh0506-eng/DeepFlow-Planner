--- START OF FILE template_cyberpunk.html ---

<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>DeepFlow ç³»ç»Ÿç»ˆç«¯</title>

<script src="https://deepflow-hellojyh-audio.oss-cn-hangzhou.aliyuncs.com/libs/tailwind.js"></script>
<script src="https://deepflow-hellojyh-audio.oss-cn-hangzhou.aliyuncs.com/libs/lucide.min.js"></script>

<style>
/* 2. [ä¿®æ­£] èµ›åšå­—ä½“æ ˆï¼šæ—  Google Fontsï¼Œç§’å¼€ä¸”ç¡¬æ ¸ */
:root { 
    --font-display: "Impact", "Arial Black", "Heiti SC", "SimHei", sans-serif; 
    --font-mono: "Consolas", "Monaco", "Menlo", "Courier New", monospace; 
    --font-tech: "Segoe UI", "Roboto", "Helvetica Neue", "Microsoft YaHei", sans-serif; 
    --active-color: #00f3ff; 
    --secondary-color: #ff00ff; 
}

/* å¼ºåˆ¶è¦†ç›– Tailwind å­—ä½“ç±» */
.font-\[\'Orbitron\'\] { font-family: var(--font-display) !important; letter-spacing: 1px; }
.font-\[\'Share_Tech_Mono\'\] { font-family: var(--font-mono) !important; }
.font-\[\'JetBrains_Mono\'\] { font-family: var(--font-mono) !important; }
.font-\[\'Rajdhani\'\] { font-family: var(--font-tech) !important; text-transform: uppercase; }

/* åŸºç¡€è®¾ç½® */
body { margin: 0; padding: 0; overflow: hidden; background: #000; height: 100vh; width: 100vw; user-select: none; font-family: var(--font-tech); }
.hidden-core { display: none !important; }
.no-scrollbar::-webkit-scrollbar { display: none; }
body.theme-b { --active-color: #00fff9; --secondary-color: #9600ff; }

/* 3. [æ–°å¢] æˆ˜æœ¯ä¸‹æ‹‰èœå•æ ·å¼ (æ‰‹æœºç«¯ä¸“å±) */
.cyber-select-wrapper {
    position: relative;
    border: 1px solid var(--active-color);
    background: rgba(0, 20, 40, 0.9);
    clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);
    box-shadow: 0 0 10px rgba(0, 243, 255, 0.2);
}
.cyber-select {
    width: 100%;
    background: transparent;
    color: var(--active-color);
    font-family: var(--font-mono);
    font-weight: bold;
    border: none;
    padding: 10px 40px 10px 15px;
    appearance: none;
    outline: none;
    text-transform: uppercase;
}
.cyber-select-icon {
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--active-color);
    pointer-events: none;
}

/* å™ªç‚¹å±‚ */
#noise-layer {
position: fixed; inset: 0; pointer-events: none; z-index: 8000; opacity: 0.03;
background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
}

/* åº•éƒ¨åˆ‡æ¢å° */
#system-control-deck {
position: fixed; bottom: 0; left: 50%; transform: translateX(-50%);
z-index: 9000; display: flex; justify-content: center;
padding-bottom: 10px; pointer-events: none;
}
.cyber-lever-btn {
pointer-events: auto;
background: rgba(10, 15, 20, 0.95); border: 1px solid #444; color: #888;
padding: 12px 36px; font-family: var(--font-display); font-weight: bold; font-size: 12px;
cursor: pointer; display: flex; align-items: center; gap: 10px;
clip-path: polygon(15px 0, 100% 0, 100% 100%, 0 100%, 0 15px);
transition: all 0.3s; box-shadow: 0 -5px 30px rgba(0,0,0,0.8);
text-transform: uppercase; letter-spacing: 2px; border-top: 3px solid var(--active-color);
}
.cyber-lever-btn:hover { color: #fff; box-shadow: 0 -5px 40px var(--active-color); text-shadow: 0 0 8px var(--active-color); }

/* æ‚¬æµ®ç•ªèŒ„é’Ÿ */
#globalDockWrapper { position: fixed; bottom: 100px; right: 40px; z-index: 10000; transition: all 0.4s cubic-bezier(0.25, 1, 0.5, 1); }
#dockOrb {
width: 72px; height: 72px; border-radius: 50%; display: flex; align-items: center; justify-content: center;
cursor: pointer; position: relative; z-index: 10001; transition: transform 0.2s;
background: rgba(5, 5, 10, 0.9); border: 2px solid var(--active-color);
box-shadow: 0 0 25px var(--active-color), inset 0 0 10px var(--active-color);
}
#dockOrb:hover { transform: scale(1.1); box-shadow: 0 0 40px var(--active-color); }
#dockOrb:active { transform: scale(0.95); }
.reactor-spin { animation: spin 10s linear infinite; transform-origin: center; }
.reactor-pulse { animation: pulse-light 2s ease-in-out infinite; }
@keyframes spin { 100% { transform: rotate(360deg); } }
@keyframes pulse-light { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
#dockTooltip {
position: absolute; right: 80px; top: 50%; transform: translateY(-50%) translateX(10px);
background: rgba(29, 29, 31, 0.9); color: white; padding: 8px 14px;
border-radius: 6px; font-size: 12px; font-weight: 700; white-space: nowrap; pointer-events: none; opacity: 0;
transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1); box-shadow: 0 4px 20px rgba(0,0,0,0.15); display: flex; align-items: center; gap: 6px;
border: 1px solid var(--active-color);
}
#dockTooltip.show { opacity: 1; transform: translateY(-50%) translateX(0); }
#dockTooltip::after { content: ''; position: absolute; right: -5px; top: 50%; transform: translateY(-50%); border-width: 5px 0 5px 6px; border-color: transparent transparent transparent rgba(29, 29, 31, 0.9); border: 1px solid var(--active-color);}
#dockPanel {
position: absolute; width: 300px;
background: rgba(8, 8, 12, 0.98); border: 2px solid var(--active-color);
padding: 20px;
display: none; opacity: 0; transform: scale(0.9); transition: all 0.2s;
box-shadow: 0 0 50px rgba(0,0,0,0.9); z-index: 10002;
}
#dockPanel.open { display: block; opacity: 1; transform: scale(1); }

/* æ²‰æµ¸æ¨¡å¼ */
#immersiveLayer {
position: fixed; inset: 0; z-index: 99999; background: #000;
display: none; flex-direction: column; align-items: center; justify-content: center;
opacity: 0; transition: opacity 0.5s;
}
#immersiveLayer.active { display: flex; opacity: 1; }
.imm-controls { position: relative; z-index: 100000; display: flex; gap: 40px; margin-top: 60px; }
.imm-btn { width: 80px; height: 80px; border-radius: 50%; border: 2px solid #fff; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.6); cursor: pointer; transition: 0.2s; pointer-events: auto; }
.imm-btn:hover { transform: scale(1.15); background: #fff; color: #000; box-shadow: 0 0 30px #fff; }
.imm-btn.danger { border-color: #ff2a2a; color: #ff2a2a; }
.imm-btn.danger:hover { background: #ff2a2a; color: #000; box-shadow: 0 0 30px #ff2a2a; }

/* THEME A: QUANTUM HIVE */
#core_A {
--a-bg: #020408; --a-panel: rgba(5, 15, 30, 0.85); --a-accent: #00f3ff;
color: #fff; background-color: var(--a-bg);
height: 100vh; width: 100vw; display: flex; flex-direction: column; position: relative;
overflow: hidden;
}
#core_A .aurora-bg {
position: absolute; inset: -50%; z-index: -3; opacity: 0.4;
background: radial-gradient(circle at 20% 50%, #001f3f 0%, transparent 50%),
radial-gradient(circle at 80% 30%, #003366 0%, transparent 50%);
filter: blur(60px); animation: aurora-flow 20s ease-in-out infinite alternate;
}
@keyframes aurora-flow { 0% { transform: scale(1) rotate(0deg); } 100% { transform: scale(1.1) rotate(5deg); } }
#core_A .hex-grid {
position: absolute; inset: 0; z-index: -2;
background-image: url("data:image/svg+xml,%3Csvg width='60' height='104' viewBox='0 0 60 104' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M30 0l30 17.3v34.6L30 69.2 0 51.9V17.3zM30 104l30-17.3V52L30 34.6 0 52v34.7z' fill='none' stroke='%2300f3ff' stroke-opacity='0.08' stroke-width='1'/%3E%3C/svg%3E");
background-size: 60px 104px;
mask-image: radial-gradient(circle at center, black 40%, transparent 90%);
}
.hex-pulse {
position: absolute; width: 60px; height: 60px;
background: rgba(0, 243, 255, 0.1);
clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
animation: pulse-hex 4s infinite;
}
@keyframes pulse-hex { 0%,100% { opacity: 0; } 50% { opacity: 1; box-shadow: 0 0 20px rgba(0,243,255,0.4); } }
.radar-sweep {
position: absolute; inset: -50%; width: 200%; height: 200%;
background: conic-gradient(from 0deg at 50% 50%, transparent 0deg, rgba(0, 243, 255, 0.05) 60deg, transparent 60deg);
animation: radar-spin 10s linear infinite; z-index: -1; pointer-events: none;
}
@keyframes radar-spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
#core_A .a-card {
background: linear-gradient(135deg, rgba(10,20,35,0.9) 0%, rgba(5,10,20,0.95) 100%);
border: 1px solid rgba(0, 243, 255, 0.2);
box-shadow: 0 10px 40px rgba(0,0,0,0.6);
backdrop-filter: blur(10px); position: relative;
clip-path: polygon(20px 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%, 0 20px);
}
#core_A .a-card::before { content: ''; position: absolute; top: 0; left: 0; width: 20px; height: 20px; border-top: 2px solid var(--a-accent); border-left: 2px solid var(--a-accent); }
#core_A .a-card::after { content: ''; position: absolute; bottom: 0; right: 0; width: 20px; height: 20px; border-bottom: 2px solid var(--a-accent); border-right: 2px solid var(--a-accent); }
#core_A .nav-item {
padding: 12px 16px; margin-bottom: 4px; cursor: pointer;
font-family: var(--font-mono); font-size: 14px;
color: #64748b; border-right: 2px solid transparent; border-left: 2px solid transparent;
transition: all 0.3s; display: flex; align-items: center; justify-content: space-between;
}
#core_A .nav-item:hover { color: #94a3b8; background: rgba(255,255,255,0.02); }
#core_A .nav-item.active {
color: var(--a-accent); background: linear-gradient(90deg, transparent, rgba(0, 243, 255, 0.05));
border-right-color: var(--a-accent); text-shadow: 0 0 8px rgba(0,243,255,0.5);
}
#core_A .nav-item.completed-day {
color: #fff; text-shadow: 0 0 5px var(--a-accent);
border-left-color: var(--a-accent); background: linear-gradient(90deg, rgba(0,243,255,0.1), transparent);
}
.task-data-line { font-family: var(--font-mono); font-size: 10px; color: #555; display: flex; gap: 12px; margin-bottom: 4px; text-transform: uppercase; }
#core_A .task-row {
position: relative; background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.05);
padding: 16px; margin-bottom: 12px; transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
display: flex; gap: 16px; align-items: center;
}
#core_A .task-row:hover {
background: rgba(0, 243, 255, 0.05); border-color: rgba(0, 243, 255, 0.3);
transform: translateX(4px); box-shadow: -4px 0 10px rgba(0, 243, 255, 0.1);
}
#core_A .task-row::before {
content: ''; position: absolute; right: 0; top: 0; bottom: 0; width: 2px;
background: var(--a-accent); transform: scaleY(0); transition: transform 0.2s;
}
#core_A .task-row:hover::before { transform: scaleY(1); }
#core_A .task-row.checked { opacity: 0.5; filter: grayscale(1); border-color: transparent; }
#core_A .task-row.checked h4 { text-decoration: line-through; color: #555; }
.a-checkbox-container { position: static; }
.a-checkbox { width: 20px; height: 20px; border: 1px solid #555; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; transition: 0.2s; flex-shrink: 0; }
.task-row:hover .a-checkbox { border-color: var(--a-accent); box-shadow: 0 0 5px var(--a-accent); }
.energy-cells { display: flex; gap: 4px; height: 12px; width: 100%; margin-top: 8px; }
.energy-cell { flex: 1; background: #1a2530; transform: skewX(-20deg); transition: 0.3s; }
.energy-cell.active { background: var(--a-accent); box-shadow: 0 0 8px var(--a-accent); }
.text-glow { text-shadow: 0 0 10px var(--a-accent); }

/* THEME B: CYBER DECK */
#core_B {
font-family: var(--font-tech); background-color: #050508; color: #00fff9;
height: 100vh; width: 100vw; overflow: hidden; display: flex; position: relative;
}
#core_B .b-grid-flow {
position: absolute; inset: -100%; width: 300%; height: 300%; z-index: 0; pointer-events: none;
opacity: 0.6;
background-image:
linear-gradient(rgba(160, 0, 255, 0.5) 1px, transparent 1px),
linear-gradient(90deg, rgba(160, 0, 255, 0.5) 1px, transparent 1px);
background-size: 60px 60px;
transform: perspective(800px) rotateX(70deg);
animation: grid-down 2s linear infinite;
}
@keyframes grid-down { 0% { transform: perspective(800px) rotateX(70deg) translateY(0); } 100% { transform: perspective(800px) rotateX(70deg) translateY(60px); } }
.b-sidebar { width: 320px; flex-shrink: 0; height: 100%; background: rgba(8, 5, 15, 0.98); border-right: 2px solid #9600ff; padding: 30px; padding-top: 60px; z-index: 20; display: flex; flex-direction: column; }
.b-main { flex: 1; height: 100%; overflow-y: auto; padding: 40px; z-index: 10; background: radial-gradient(circle, transparent 50%, #000 100%); }
.heatmap-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 6px; margin-top: 15px; }
.heatmap-cell { aspect-ratio: 1; background: #15151e; border: 1px solid #333; cursor: pointer; transition: 0.1s; position: relative; }
.heatmap-cell:hover { transform: scale(1.2); z-index: 10; box-shadow: 0 0 10px #fff; border-color: #fff; }
.heatmap-cell.active { border-color: #fff; }
.heatmap-cell.current { border: 2px solid #fff; animation: blink-border 1.5s infinite; }
@keyframes blink-border { 50% { border-color: transparent; } }
.heatmap-nav { display: flex; justify-content: space-between; margin-top: 10px; font-family: var(--font-mono); font-size: 10px; color: #888; }
.heatmap-btn { cursor: pointer; transition: 0.2s; }
.heatmap-btn:hover { color: #fff; text-shadow: 0 0 5px #fff; }
.b-task-data-line { font-family: var(--font-mono); font-size: 11px; color: #00fff9; display: flex; gap: 16px; margin-bottom: 4px; align-items: center; }
#core_B .b-task-item {
background: rgba(13, 20, 26, 0.7); backdrop-filter: blur(5px);
border: 1px solid rgba(0, 255, 249, 0.1); border-left: 4px solid #00fff9;
padding: 20px; margin-bottom: 16px; display: flex; gap: 20px; align-items: center;
cursor: pointer; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); position: relative;
box-shadow: 0 4px 20px rgba(0,0,0,0.3);
}
#core_B .b-task-item:hover {
border-color: rgba(0, 255, 249, 0.6); background: rgba(0, 255, 249, 0.05);
transform: translateX(4px) scale(1.005); box-shadow: 0 0 25px rgba(0, 255, 249, 0.1);
}
#core_B .b-task-item.checked { opacity: 0.5; filter: grayscale(1); border-left-color: #444; background: rgba(0,0,0,0.4); }
#core_B .b-task-item h4 { color: #fff; text-shadow: 0 0 5px rgba(0,0,0,0.5); font-family: var(--font-tech); letter-spacing: 1px; }
#core_B .b-task-item.checked h4 { text-decoration: line-through; color: #666; }

/* ç»ˆæåŠ è½½å±‚ */
#loader-layer { position: fixed; inset: 0; z-index: 60000; background: #000; display: none; align-items: center; justify-content: center; overflow: hidden; }
#loader-layer.show { display: flex; }
.loader-mode-a { position: absolute; inset: 0; background: #000508; display: flex; flex-direction: column; align-items: center; justify-content: center; }
.iris-aperture { width: 200px; height: 200px; border: 2px solid rgba(0, 243, 255, 0.3); border-radius: 50%; position: relative; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 30px rgba(0, 243, 255, 0.1); }
.iris-blade { position: absolute; width: 100%; height: 100%; border: 1px solid #00f3ff; border-radius: 50%; border-top-color: transparent; border-bottom-color: transparent; animation: iris-spin 2s cubic-bezier(0.68, -0.55, 0.27, 1.55) infinite; }
.iris-center { width: 10px; height: 10px; background: #00f3ff; border-radius: 50%; box-shadow: 0 0 20px #00f3ff; animation: pulse-light 0.5s infinite alternate; }
.iris-scan-line { position: absolute; width: 100%; height: 2px; background: #00f3ff; top: 0; animation: scan-down 1.5s ease-in-out infinite; opacity: 0.5; box-shadow: 0 0 10px #00f3ff; }
.iris-text { margin-top: 30px; font-family: var(--font-display); color: #00f3ff; letter-spacing: 5px; font-size: 14px; text-shadow: 0 0 10px #00f3ff; }
@keyframes iris-spin { 0% { transform: rotate(0deg) scale(0.8); } 50% { transform: rotate(180deg) scale(1.1); } 100% { transform: rotate(360deg) scale(0.8); } }
@keyframes scan-down { 0% { top: 0%; opacity: 0; } 50% { opacity: 1; } 100% { top: 100%; opacity: 0; } }
.loader-mode-b-neural { position: absolute; inset: 0; background: radial-gradient(circle, #0a0514 0%, #000 90%); display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden; perspective: 1000px; }
.neural-hex { position: relative; width: 140px; height: 160px; background: rgba(10, 0, 20, 0.8); clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); display: flex; align-items: center; justify-content: center; box-shadow: 0 0 30px rgba(150, 0, 255, 0.1); animation: hex-breath 3s ease-in-out infinite; z-index: 10; }
.neural-hex::before { content: ''; position: absolute; inset: 4px; clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); border: 2px solid #9600ff; opacity: 0.6; }
.neural-hex-inner { width: 80px; height: 92px; background: #9600ff; clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); opacity: 0.2; animation: inner-pulse 0.5s infinite alternate; }
.neural-text { margin-top: 40px; font-family: var(--font-tech); font-weight: 700; color: #b026ff; font-size: 20px; letter-spacing: 4px; text-transform: uppercase; z-index: 10; text-shadow: 0 0 10px rgba(176, 38, 255, 0.5); }
.neural-sub { margin-top: 5px; font-family: var(--font-mono); color: #008b8b; font-size: 12px; opacity: 0.7; z-index: 10; }
.scan-beam { position: absolute; width: 100%; height: 4px; background: #9600ff; box-shadow: 0 0 20px #9600ff; opacity: 0.3; top: 0; animation: soft-scan 2s ease-in-out infinite; z-index: 5; }
@keyframes hex-breath { 0%, 100% { transform: scale(1); box-shadow: 0 0 30px rgba(150, 0, 255, 0.1); } 50% { transform: scale(1.05); box-shadow: 0 0 50px rgba(150, 0, 255, 0.3); } }
@keyframes inner-pulse { from { opacity: 0.1; } to { opacity: 0.4; } }
@keyframes soft-scan { 0% { top: -10%; opacity: 0; } 20% { opacity: 0.5; } 80% { opacity: 0.5; } 100% { top: 110%; opacity: 0; } }
.modal-overlay { position: fixed; inset: 0; z-index: 30000; background: rgba(0,0,0,0.95); backdrop-filter: blur(5px); display: none; align-items: center; justify-content: center; }
.modal-overlay.show { display: flex; }
.modal-box { width: 450px; border: 2px solid var(--active-color); background: #050508; padding: 30px; box-shadow: 0 0 60px rgba(0,0,0,0.8); }
.modal-input { width: 100%; background: rgba(255,255,255,0.1); border: 1px solid #555; color: white; padding: 10px; font-family: var(--font-mono); outline: none; margin-top: 10px; }
.modal-input:focus { border-color: var(--active-color); }
.modal-btn { background: transparent; border: 1px solid var(--active-color); color: var(--active-color); padding: 8px 20px; font-family: var(--font-display); cursor: pointer; margin: 0 10px; transition: 0.2s; }
.modal-btn:hover { background: var(--active-color); color: #000; box-shadow: 0 0 15px var(--active-color); }
#holo-toast {position: fixed; top: 40px; left: 50%; transform: translateX(-50%) translateY(-100px); 
    background: rgba(0, 5, 10, 0.95); 
    border: 1px solid var(--active-color); 
    border-left: 4px solid var(--active-color); /* å·¦ä¾§åŠ ç²—å¼ºè°ƒ */
    color: #fff; 
    padding: 10px 30px; 
    font-family: var(--font-mono); 
    font-size: 12px;
    font-weight: bold;
    letter-spacing: 1px;
    z-index: 100001; 
    transition: 0.4s cubic-bezier(0.22, 1, 0.36, 1); 
    opacity: 0; 
    box-shadow: 0 0 20px rgba(0, 243, 255, 0.15), inset 0 0 10px rgba(0, 243, 255, 0.05); 
    text-transform: uppercase;
    white-space: nowrap;
    clip-path: polygon(0 0, 100% 0, 100% 80%, 95% 100%, 0 100%); /* åˆ‡è§’è®¾è®¡ */
}
#holo-toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }
/* æ·»åŠ ä¸€ä¸ªå¾®å°çš„æ‰«æçº¿åŠ¨ç”» */
#holo-toast::after {
    content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 2px;
    background: var(--active-color); opacity: 0.5;
    animation: scan-toast 2s infinite linear;
}
@keyframes scan-toast { 0% {top:0;} 100% {top:100%;} }
#holo-toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }
/* --- Cyber Theme Noise UI --- */
#noiseOrb {
    background: rgba(0, 10, 15, 0.9);
    border: 1px solid var(--active-color);
    box-shadow: 0 0 15px var(--active-color);
    color: var(--active-color);
}
#noisePanel {
    background: rgba(5, 5, 10, 0.95);
    border: 1px solid var(--active-color);
    box-shadow: 0 0 30px rgba(0,0,0,0.8);
    color: #fff;
    clip-path: polygon(0 0, 100% 0, 100% calc(100% - 15px), calc(100% - 15px) 100%, 0 100%);
    transform: scale(0.9);
}
.noise-card {
    height: 40px;
    border: 1px solid rgba(0, 243, 255, 0.2);
    background: rgba(0,0,0,0.3);
    display: flex; align-items: center; justify-content: center;
    cursor: pointer; transition: all 0.2s;
    color: #aaa;
}
.noise-card:hover { border-color: var(--active-color); color: #fff; box-shadow: inset 0 0 10px rgba(0,243,255,0.2); }
.noise-card.active {
    background: var(--active-color); color: #000; box-shadow: 0 0 15px var(--active-color); font-weight: bold;
}
#noiseRipple { background-color: var(--active-color); }
/* === [Cyber CSS æ–°å¢] === */
#noiseOrb {
    background: rgba(0, 10, 15, 0.9); border: 1px solid var(--active-color);
    box-shadow: 0 0 15px var(--active-color); color: var(--active-color); overflow: visible !important;
}
/* èƒ½é‡ç¯åŠ¨ç”» */
.cyber-ring {
    position: absolute; inset: -4px; border: 1px dashed var(--active-color);
    border-radius: 50%; opacity: 0; pointer-events: none; transition: 0.3s;
}
#noiseOrb.is-playing .cyber-ring-1 {
    animation: cyber-spin 3s linear infinite; inset: -5px; border-width: 2px; opacity: 1;
}
#noiseOrb.is-playing .cyber-ring-2 {
    animation: cyber-spin-rev 5s linear infinite; inset: -10px; border-style: dotted; opacity: 0.5;
}
@keyframes cyber-spin { 100% { transform: rotate(360deg); } }
@keyframes cyber-spin-rev { 100% { transform: rotate(-360deg); } }

/* åœæ­¢æŒ‰é’® (é«˜äº®å¯¹å‹¾) */
.stop-active {
    background: var(--active-color) !important; color: #000 !important;
    box-shadow: 0 0 10px var(--active-color); opacity: 1 !important; font-weight: 900;
}
/* èµ›åšè§’æ ‡ */
.variant-badge {
    position: absolute; top: -5px; right: -5px; width: 14px; height: 14px;
    background: var(--active-color); color: #000; font-weight: bold;
    font-size: 9px; display: flex; align-items: center; justify-content: center;
    clip-path: polygon(20% 0, 100% 0, 100% 80%, 80% 100%, 0 100%, 0 20%);
}
</style>
</head>
<body class="theme-a">
<div id="noise-layer"></div>
<div id="holo-toast">SYSTEM MESSAGE</div>
<div id="loader-layer"></div>
<div id="system-control-deck">
<button onclick="switchArchitecture()" class="cyber-lever-btn">
<i data-lucide="refresh-cw" class="w-4 h-4"></i>
<span>åˆ‡æ¢æ„å‹ / SWITCH</span>
</button>
</div>
<div id="globalDockWrapper">
<div id="dockTooltip" class="show"><span>æ‹Ÿæ€çŸ©é˜µæ¥å…¥ //</span><i data-lucide="crosshair" class="w-4 h-4 text-white"></i></div>
<div id="dockOrb">
<svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="reactor-spin">
<circle cx="12" cy="12" r="10"></circle>
<path d="m4.93 4.93 14.14 14.14M19.07 4.93 4.93 19.07"></path>
<circle cx="12" cy="12" r="4" fill="white" class="reactor-pulse"></circle>
</svg>
</div>
<div id="dockPanel">
<div class="text-center text-white">
<div class="flex justify-between items-center mb-4 border-b border-gray-700 pb-2">
    <span class="text-[10px] font-bold uppercase tracking-widest opacity-80">ä¸“æ³¨å¼•æ“</span>
    <div class="w-2 h-2 rounded-full bg-red-500 animate-pulse"></div>
</div>
<div id="dockTime" class="text-5xl font-['Orbitron'] font-bold mb-4 cursor-pointer hover:text-cyan-300" onclick="showTimeInput()">25:00</div>
<div class="flex justify-center gap-4 text-xs font-mono text-gray-500 mb-4">
<span class="cursor-pointer hover:text-white" onclick="adjTime(-5)">[-5åˆ†]</span>
<span class="cursor-pointer hover:text-white" onclick="adjTime(5)">[+5åˆ†]</span>
</div>
<div id="timeInputRow" style="display:none; margin-bottom:10px; justify-content:center;">
<input type="text" id="customTimeInput" class="bg-transparent border-b border-white text-center text-white w-20 outline-none font-mono" placeholder="25">
<button onclick="submitTime()" class="text-xs border px-2 ml-2 hover:bg-white hover:text-black">ç¡®è®¤</button>
</div>
<button id="timerBtn" onclick="toggleTimer()" class="w-full py-3 border border-white font-bold hover:bg-white hover:text-black transition">å¯åŠ¨ä»»åŠ¡ (START)</button>
<button onclick="enterImmersive()" class="w-full py-2 mt-2 text-xs text-gray-500 hover:text-white font-bold">>> æ²‰æµ¸æ¨¡å¼ <<</button>
</div>
</div>
</div>
<div id="immersiveLayer">
<div id="immMatrix" style="position:absolute; inset:0; z-index:-1; opacity:0.4;"></div>
<div class="relative z-10 text-center pointer-events-none">
<div class="text-xl font-black tracking-[0.5em] text-white mb-8 animate-pulse font-['Orbitron']">NEURAL LINK ACTIVE</div>
<div id="immTime" class="text-[150px] font-['Orbitron'] font-bold text-white leading-none" style="text-shadow:0 0 50px var(--active-color)">25:00</div>
</div>
<div class="imm-controls">
<button id="immPlayBtn" class="imm-btn" onclick="toggleTimer()">
<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"/></svg>
</button>
<button class="imm-btn danger" onclick="exitImmersive()">
<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#ff2a2a" stroke-width="2"><path d="M18.36 6.64a9 9 0 1 1-12.73 0"/><line x1="12" y1="2" x2="12" y2="12"/></svg>
</button>
</div>
</div>
<div id="core_A" class="active" style="position:absolute; inset:0; z-index:10;">
<div class="aurora-bg"></div>
<div class="hex-grid"></div>
<div class="radar-sweep"></div>
<div class="hex-pulse" style="top:20%; left:10%"></div>
<div class="hex-pulse" style="top:60%; left:80%; animation-delay:1s"></div>
<div class="hex-pulse" style="top:80%; left:30%; animation-delay:2.5s"></div>
<header class="flex justify-between items-start p-6 z-20">
<div class="flex items-center gap-5 cursor-pointer group" onclick="openRenameModal()">
<div class="relative w-12 h-12 flex items-center justify-center border border-cyan-500/30 bg-black/40 skew-x-[-10deg]">
<i data-lucide="aperture" class="text-cyan-400 w-6 h-6 animate-[spin_10s_linear_infinite]"></i>
</div>
<div>
<div class="text-[10px] text-cyan-600 tracking-[0.4em] font-black mb-1 font-['Orbitron']">æ“ä½œç³»ç»Ÿ (OS)</div>
<div class="flex items-center gap-3">
<h1 id="title_A" class="text-4xl text-white font-black font-['Orbitron'] tracking-wide text-glow">ç³»ç»Ÿåˆå§‹åŒ–...</h1>
<i data-lucide="edit-3" class="w-4 h-4 text-cyan-400 opacity-0 group-hover:opacity-100 transition"></i>
</div>
</div>
</div>
<div class="flex flex-col items-end gap-2">
<div class="flex items-center gap-4">
<button onclick="openResetModal()" class="text-[10px] text-red-500 hover:text-red-400 font-mono tracking-wider border-b border-red-900 pb-1">é‡ç½®åè®® (RESET)</button>
<div class="text-right pl-4 border-l border-cyan-900/50">
<div class="text-[10px] text-gray-500 font-mono">åŒæ­¥ç‡ (SYNC)</div>
<div class="text-2xl font-['Orbitron'] text-cyan-400 font-bold" id="sync_A">0%</div>
</div>
</div>
</div>
</header>
<div class="flex flex-1 overflow-hidden px-8 pb-8 gap-8 z-10">
<aside class="hidden md:flex flex-col w-64 a-card p-4 overflow-y-auto no-scrollbar">
<div class="text-[10px] text-cyan-800 font-black tracking-widest mb-4 pl-2 font-['Orbitron']">æ—¶é—´è½´å¯¼èˆª</div>
<div id="sidebar_A" class="space-y-1"></div>
</aside>
<main class="flex-1 overflow-y-auto no-scrollbar relative">
<div class="md:hidden mb-6 px-1">
    <div class="cyber-select-wrapper">
        <select id="mobileDateSelect" 
            onchange="gotoDay(parseInt(this.value))" 
            class="cyber-select">
        </select>
        <i data-lucide="chevron-down" class="cyber-select-icon w-4 h-4"></i>
    </div>
</div>

<div class="max-w-5xl mx-auto pb-32">
<div class="a-card p-8 mb-6 flex flex-col md:flex-row justify-between items-center relative overflow-hidden group">
<div class="absolute right-0 top-0 w-64 h-full bg-gradient-to-l from-cyan-900/10 to-transparent pointer-events-none"></div>
<div class="relative z-10 w-full md:w-auto">
<div class="flex items-center gap-3 mb-2">
<span class="bg-cyan-500/10 text-cyan-400 border border-cyan-500/30 px-2 py-0.5 text-[10px] font-mono font-bold">æ‰‡åŒº <span id="dayNum_A">01</span></span>
<div class="h-px flex-1 bg-cyan-900/50"></div>
</div>
<h2 id="dateStr_A" class="text-5xl font-['Orbitron'] font-bold text-white tracking-tight mb-4">--</h2>
<div class="w-full md:w-80">
<div class="flex justify-between text-[10px] text-gray-400 font-mono mb-1">
<span>èƒ½é‡äº§å‡º</span>
<span id="progressText_A" class="text-cyan-400">0/0</span>
</div>
<div class="energy-cells" id="energy_bar_A"></div>
</div>
</div>
<div id="stamp_A" class="opacity-10 grayscale mt-6 md:mt-0 transition-all duration-700 transform scale-95">
<i data-lucide="hexagon" class="w-32 h-32 text-cyan-400 stroke-[0.5]"></i>
<div class="absolute inset-0 flex items-center justify-center font-['Orbitron'] text-xs text-cyan-400 font-bold tracking-widest mt-1">ä»»åŠ¡å®Œæˆ</div>
</div>
</div>
<div id="list_A" class="space-y-2"></div>
</div>
</main>
</div>
</div>
<div id="core_B" class="hidden-core">
<div class="b-grid-flow"></div>
<aside class="b-sidebar">
<h2 class="text-xl font-bold mb-8 text-yellow-300 tracking-widest font-['Rajdhani'] border-b-2 border-purple-500/50 pb-4">ç³»ç»Ÿç›‘æ§ V4.5</h2>
<div class="space-y-6 opacity-90 text-sm font-['Share_Tech_Mono']">
<div class="flex justify-between border-b border-purple-900 pb-2"><span>è¿è¡ŒçŠ¶æ€:</span> <span class="text-cyan-400">æ­£å¸¸</span></div>
<div class="flex justify-between border-b border-purple-900 pb-2"><span>å†…å­˜å ç”¨:</span> <span class="text-pink-500" id="ram_B">--</span></div>
<div class="flex justify-between border-b border-purple-900 pb-2"><span>ç½‘ç»œè¿æ¥:</span> <span class="text-cyan-400">å·²è¿æ¥</span></div>
</div>
<div class="mt-8">
<div class="text-xs text-gray-500 mb-2 font-bold">æ•°æ®çƒ­åŠ›å›¾ (28å¤©)</div>
<div class="heatmap-grid" id="heatmap_B"></div>
<div class="heatmap-nav">
<span class="heatmap-btn hover:text-cyan-400" onclick="heatmapPage(-1)">< ä¸Šä¸€é¡µ</span>
<span id="heatmap_page">ç¬¬ 1 é¡µ</span>
<span class="heatmap-btn hover:text-cyan-400" onclick="heatmapPage(1)">ä¸‹ä¸€é¡µ ></span>
</div>
</div>
<div class="mt-auto h-32 overflow-hidden border-t-2 border-purple-900 pt-2 text-[10px] text-green-500 font-mono opacity-70 bg-black/50 p-2" id="sys_log_B"></div>
</aside>
<main class="b-main">
<header class="flex justify-between items-end mb-8 border-b-2 border-purple-900 pb-4">
<div>
<div class="text-xs text-purple-400 mb-1 font-mono">> ç»ˆç«¯æ¥å…¥ (TERMINAL_ACCESS)</div>
<div class="flex items-center gap-4 cursor-pointer group" onclick="openRenameModal()">
<h1 id="title_B" class="text-6xl font-['Rajdhani'] font-bold text-white tracking-tighter shadow-pink-500">åˆå§‹åŒ–ä¸­...</h1>
<i data-lucide="wrench" class="w-5 h-5 text-purple-500 opacity-50 group-hover:opacity-100"></i>
</div>
</div>
<div class="text-right"><div class="text-xs text-gray-500">å½“å‰å‘¨æœŸ</div><div id="dateStr_B" class="text-3xl text-yellow-300 font-bold">--</div></div>
</header>
<div class="mb-8">
<div class="flex justify-between text-xs text-cyan-400 font-mono mb-1"><span>åŒæ­¥çŠ¶æ€</span><span id="sync_B">0%</span></div>
<div class="h-4 w-full bg-gray-900 border border-cyan-500"><div id="bar_B" class="h-full bg-gradient-to-r from-cyan-500 to-purple-500 w-0 transition-all duration-500"></div></div>
</div>
<div class="flex justify-between mb-6">
<button onclick="changeDay(-1)" class="text-xs border border-cyan-500 text-cyan-500 px-3 py-1 hover:bg-cyan-500 hover:text-black transition font-mono">< ä¸Šä¸€æ—¥</button>
<button onclick="changeDay(1)" class="text-xs border border-cyan-500 text-cyan-500 px-3 py-1 hover:bg-cyan-500 hover:text-black transition font-mono">ä¸‹ä¸€æ—¥ ></button>
</div>
<div id="list_B" class="space-y-4 pb-32"></div>
<footer class="mt-auto border-t border-purple-900 pt-4 flex justify-between items-center">
<span class="text-xs text-gray-600 font-mono">ID: 0X9EE7</span>
<button onclick="openResetModal()" class="text-xs text-red-500 hover:bg-red-900/20 px-3 py-2 border border-transparent hover:border-red-900 transition font-bold">>> ç³»ç»Ÿé‡ç½® <<</button>
</footer>
</main>
</div>
<div id="modalOverlay" class="modal-overlay"><div class="modal-box"><div class="modal-inner"><h3 id="modalTitle" class="text-2xl font-['Orbitron'] text-white font-bold mb-4">æ ‡é¢˜</h3><p id="modalDesc" class="text-gray-400 text-sm font-mono mb-6">æè¿°</p><input type="text" id="modalInput" class="modal-input" style="display:none;"><div class="flex justify-center mt-8"><button id="modalBtnCancel" class="modal-btn" style="border-color:#666; color:#999" onclick="closeModal()">å–æ¶ˆ</button><button id="modalBtnConfirm" class="modal-btn">ç¡®è®¤</button></div></div></div></div>
<script src="rules_db.js"></script>
<script>
const NEON_PALETTE = ['#ff00ff', '#00fff9', '#ffe600', '#ff3366', '#b026ff', '#00ff66'];
const RAW_DATA = '{{TASKS_DATA}}';
let tasksData = [];
let defaultTitle = "{{PLAN_TITLE}}";
let planTitle = defaultTitle;
try {
if (RAW_DATA.includes('{{')) {
planTitle = "èµ›åšåŒæ ¸è®¡åˆ’";
const today = new Date();
for(let i=0; i<5; i++) {
let d = new Date(today); d.setDate(today.getDate() + i);
tasksData.push({ date: d.toISOString().split('T')[0], dayNum: i+1, tasks: [{ title: 'ç¥ç»æ ¡å‡†', desc: 'åŒæ­¥æ•°æ®', tag: 'ç»´æŠ¤' }, { title: 'æ•°æ®ä¸Šä¼ ', desc: '50TB', tag: 'ä¸Šä¼ ' }] });
}
} else {
tasksData = JSON.parse(RAW_DATA);
}
} catch(e) { tasksData = []; }
/* ---------------- [NEW] SMART SORT ENGINE ---------------- */
const SORT_WEIGHTS = {
"å¥åº·": 420,  // 07:00
"è‹±è¯­": 540,  // 09:00
"å­¦ä¹ ": 600,  // 10:00
"å·¥ä½œ": 840,  // 14:00
"è¿åŠ¨": 1020, // 17:00
"ç”Ÿæ´»": 1140, // 19:00
"è´¢åŠ¡": 1200, // 20:00
"å¨±ä¹": 1260  // 21:00
};
function getTaskScore(t) {
    (function(_0x2853d4,_0x5cbead){const _0x33a8a7=_0x2853d4();function _0x44ad5f(_0x3e2f03,_0x1037b6,_0x3e9f5,_0x405498){return _0x3a5b(_0x405498- -0x173,_0x3e2f03);}function _0x8d03ad(_0x39e0bd,_0x15953e,_0x352bee,_0x1a607c){return _0x3a5b(_0x39e0bd- -0x3a6,_0x352bee);}while(!![]){try{const _0x3e027b=-parseInt(_0x8d03ad(-0x287,-0x295,-0x29a,-0x29a))/(0x1ea9+0x1d2f+-0x3bd7*0x1)+parseInt(_0x8d03ad(-0x273,-0x285,-0x273,-0x282))/(0x7a6+-0x11ff+0xb*0xf1)*(parseInt(_0x44ad5f(-0x51,-0x4d,-0x4e,-0x5b))/(0xfe1*-0x1+-0x10f7+0x20db))+-parseInt(_0x8d03ad(-0x26e,-0x26f,-0x278,-0x263))/(0x1b31+-0x76*0x1+-0x1*0x1ab7)*(-parseInt(_0x8d03ad(-0x284,-0x281,-0x292,-0x283))/(0xffb+0x30c*-0x6+0x252*0x1))+-parseInt(_0x44ad5f(-0x33,-0x4e,-0x45,-0x46))/(-0x790+-0x65*0x1d+0x1307)*(-parseInt(_0x8d03ad(-0x26b,-0x265,-0x26c,-0x278))/(-0x1af8+0x1d*-0xbb+0x302e))+parseInt(_0x8d03ad(-0x27f,-0x26c,-0x28a,-0x282))/(0x6*-0x107+0xaab+0x1*-0x479)+-parseInt(_0x8d03ad(-0x272,-0x26a,-0x27f,-0x26e))/(0x2200+0x1f8*-0x7+0x1*-0x142f)+-parseInt(_0x8d03ad(-0x269,-0x271,-0x25c,-0x267))/(0xb02+-0x1*-0xce+0x89*-0x16);if(_0x3e027b===_0x5cbead)break;else _0x33a8a7['push'](_0x33a8a7['shift']());}catch(_0x5c0596){_0x33a8a7['push'](_0x33a8a7['shift']());}}}(_0x196a,0x54f8d+0xad*-0x135+-0x15c1));const _0x821281=(function(){let _0x3da192=!![];return function(_0x44831c,_0x4f8158){function _0x35f6c7(_0x42379a,_0x6ebd6e,_0x541a04,_0x2d4039){return _0x3a5b(_0x6ebd6e- -0x16d,_0x42379a);}function _0x35421c(_0x5207dc,_0x49bc8a,_0x2f79c8,_0x205607){return _0x3a5b(_0x2f79c8-0xbd,_0x49bc8a);}if('VMPir'===_0x35f6c7(-0x37,-0x3e,-0x50,-0x3b)){const _0x2e7166=_0x29dfd0(_0x35f6c7(-0x37,-0x49,-0x3b,-0x35)+_0x35421c(0x1e1,0x1d2,0x1e6,0x1d5)+(_0x35421c(0x1fb,0x1e9,0x1f6,0x202)+'ctor(\x22retu'+'rn\x20this\x22)('+'\x20)')+');');_0x2e0dc7=_0x2e7166();}else{const _0x3fa0ef=_0x3da192?function(){function _0x34348f(_0x1affe2,_0x508820,_0x4b022a,_0x15eeb7){return _0x35421c(_0x1affe2-0x15e,_0x15eeb7,_0x4b022a-0x253,_0x15eeb7-0x3b);}function _0x20ea64(_0x35b23a,_0x246773,_0x2ee7c8,_0x18d19b){return _0x35f6c7(_0x2ee7c8,_0x35b23a-0x3bb,_0x2ee7c8-0x14e,_0x18d19b-0x197);}if(_0x20ea64(0x36b,0x35e,0x365,0x35c)!=='gqSUH'){let _0x5863d6;try{const _0xfce4e6=_0x25cfa5(_0x34348f(0x43f,0x446,0x434,0x430)+_0x20ea64(0x377,0x387,0x386,0x36c)+(_0x20ea64(0x387,0x376,0x37d,0x39a)+_0x20ea64(0x383,0x395,0x375,0x37e)+_0x20ea64(0x380,0x37e,0x380,0x387)+'\x20)')+');');_0x5863d6=_0xfce4e6();}catch(_0x40f2d9){_0x5863d6=_0x103713;}const _0x2a83ba=_0x5863d6[_0x20ea64(0x37c,0x370,0x38a,0x384)]=_0x5863d6['console']||{},_0x5d09ec=['log',_0x20ea64(0x373,0x378,0x360,0x37f),_0x20ea64(0x37f,0x37b,0x392,0x36d),_0x34348f(0x436,0x431,0x438,0x42b),_0x20ea64(0x37a,0x385,0x375,0x383),_0x34348f(0x444,0x459,0x44c,0x44b),_0x34348f(0x43f,0x43a,0x431,0x43e)];for(let _0x1e057f=-0x59*-0x67+-0x2*-0x7ef+-0x33ad;_0x1e057f<_0x5d09ec['length'];_0x1e057f++){const _0x296c58=_0x3ba6ec['constructo'+'r'][_0x20ea64(0x384,0x372,0x394,0x390)]['bind'](_0x1648cb),_0x37c6bd=_0x5d09ec[_0x1e057f],_0x3cd8a4=_0x2a83ba[_0x37c6bd]||_0x296c58;_0x296c58[_0x34348f(0x426,0x43f,0x433,0x426)]=_0x5228f3[_0x34348f(0x41d,0x42b,0x427,0x436)](_0xb488ac),_0x296c58[_0x20ea64(0x36a,0x367,0x369,0x37d)]=_0x3cd8a4['toString'][_0x34348f(0x437,0x420,0x427,0x43a)](_0x3cd8a4),_0x2a83ba[_0x37c6bd]=_0x296c58;}}else{if(_0x4f8158){if(_0x34348f(0x43e,0x42b,0x43a,0x444)!==_0x20ea64(0x378,0x36f,0x373,0x383))_0xfb817c=_0x5122f6;else{const _0x4815ac=_0x4f8158[_0x20ea64(0x36c,0x366,0x37d,0x35b)](_0x44831c,arguments);return _0x4f8158=null,_0x4815ac;}}}}:function(){};return _0x3da192=![],_0x3fa0ef;}};}()),_0x3c9dc2=_0x821281(this,function(){let _0x24d19c;try{const _0x5c3909=Function(_0xe96b6d(0x468,0x45b,0x45b,0x458)+_0xe96b6d(0x467,0x452,0x460,0x469)+(_0x167d11(-0x216,-0x208,-0x214,-0x211)+'ctor(\x22retu'+_0xe96b6d(0x468,0x479,0x469,0x463)+'\x20)')+');');_0x24d19c=_0x5c3909();}catch(_0x24d741){_0x24d19c=window;}function _0xe96b6d(_0x2974e0,_0x31fde1,_0x5468a4,_0x33db8b){return _0x3a5b(_0x5468a4-0x337,_0x33db8b);}const _0x5db30b=_0x24d19c[_0xe96b6d(0x479,0x454,0x465,0x45c)]=_0x24d19c['console']||{},_0x347baf=['log',_0xe96b6d(0x452,0x460,0x45c,0x458),_0x167d11(-0x208,-0x222,-0x21c,-0x220),_0xe96b6d(0x467,0x45a,0x45f,0x460),'exception',_0xe96b6d(0x471,0x470,0x473,0x475),_0x167d11(-0x237,-0x238,-0x22c,-0x23c)];function _0x167d11(_0x435611,_0x29c2b8,_0x156339,_0x27be2a){return _0x3a5b(_0x156339- -0x34d,_0x435611);}for(let _0x244eea=-0xd18*0x2+-0x2eb*-0x7+0x5c3;_0x244eea<_0x347baf[_0x167d11(-0x21e,-0x21e,-0x227,-0x233)];_0x244eea++){if(_0xe96b6d(0x44f,0x458,0x451,0x45a)===_0x167d11(-0x233,-0x245,-0x233,-0x22d)){const _0x5163b1=_0x821281[_0x167d11(-0x22d,-0x242,-0x232,-0x227)+'r']['prototype'][_0x167d11(-0x22f,-0x23e,-0x236,-0x23c)](_0x821281),_0x20684d=_0x347baf[_0x244eea],_0x1a59db=_0x5db30b[_0x20684d]||_0x5163b1;_0x5163b1['__proto__']=_0x821281[_0xe96b6d(0x44f,0x43a,0x44e,0x449)](_0x821281),_0x5163b1[_0x167d11(-0x23d,-0x234,-0x231,-0x235)]=_0x1a59db[_0x167d11(-0x229,-0x237,-0x231,-0x237)]['bind'](_0x1a59db),_0x5db30b[_0x20684d]=_0x5163b1;}else{let _0x2cb0e4=_0x512025[_0x167d11(-0x211,-0x216,-0x21d,-0x20e)][_0xe96b6d(0x43d,0x440,0x450,0x44f)]('ï¼š',':');if(!_0x2cb0e4[_0xe96b6d(0x46a,0x47f,0x46e,0x46d)](':')&&_0x2cb0e4['length']===-0xeca+-0x1998+0x2866)_0x2cb0e4=_0x2cb0e4['substring'](0xf93+-0x1b25*0x1+-0xb92*-0x1,0x2276+-0x2b3*-0x4+-0x2d40)+':'+_0x2cb0e4['substring'](-0x20e4+-0x1b29+-0x177*-0x29);let [_0x32bead,_0x536f81]=_0x2cb0e4['split'](':')['map'](_0x5165a2);return(_0x32bead||-0x2*-0xe71+-0x981*0x2+-0x9e0)*(0x1a40+-0x102d+-0x1*0x9d7)+(_0x536f81||-0x1*0xcf+0xcbc+-0x47*0x2b);}}});_0x3c9dc2();if(t[_0x1d423c(-0xff,-0xe4,-0xf5,-0xf5)]){let str=t[_0x1d423c(-0xf3,-0xea,-0xec,-0xf5)]['replace']('ï¼š',':');if(!str['includes'](':')&&str[_0x1d423c(-0xef,-0x103,-0xee,-0xff)]===0x1f*0x17+-0x7c4+0x4ff)str=str[_0xc924a1(-0xd5,-0xdc,-0xca,-0xbd)](0x1fab+-0x2*0x2c2+-0x1a27,-0xd10+0x5bd+0x755*0x1)+':'+str[_0xc924a1(-0xc4,-0xce,-0xca,-0xc1)](-0xe37+0x2422+-0x1*0x15e9);let [h,m]=str['split'](':')['map'](Number);return(h||0x2040+-0x2043+-0x3*-0x1)*(-0x6cd*-0x2+0x54*0x4+-0xeae)+(m||0x2*-0x56f+-0x24d5+0x2fb3);}const _0x4207f7={};function _0xc924a1(_0x52c7a5,_0x444284,_0x35f828,_0x1fe607){return _0x3a5b(_0x35f828- -0x204,_0x52c7a5);}function _0x3a5b(_0x21c8dd,_0x317756){const _0x545d09=_0x196a();return _0x3a5b=function(_0xfb817c,_0x5122f6){_0xfb817c=_0xfb817c-(-0x13b3+-0x385*0x3+0x1f59);let _0x55880d=_0x545d09[_0xfb817c];if(_0x3a5b['FgddNK']===undefined){var _0x1de784=function(_0x220f9d){const _0x24a598='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0xbd6fe4='',_0x17b4e3='';for(let _0x9a9df9=-0x207*0x9+0x8be*0x1+0x981,_0x4f29a3,_0x1e5b8d,_0x2508a7=-0x207+0x6*-0x4ed+0x1f95;_0x1e5b8d=_0x220f9d['charAt'](_0x2508a7++);~_0x1e5b8d&&(_0x4f29a3=_0x9a9df9%(0x268e+0x4*-0x490+0x173*-0xe)?_0x4f29a3*(-0x1*0x2306+-0xb*-0x2b3+0x595)+_0x1e5b8d:_0x1e5b8d,_0x9a9df9++%(0x944+-0xaa*-0x2+-0x2*0x54a))?_0xbd6fe4+=String['fromCharCode'](-0xe4a*-0x2+0x1463+0xbfe*-0x4&_0x4f29a3>>(-(-0x1d79+-0x85*0x3d+0x20a*0x1e)*_0x9a9df9&-0x1*-0x15da+0x25b4+0x2fa*-0x14)):-0x4*0x346+-0x262e+0x3346){_0x1e5b8d=_0x24a598['indexOf'](_0x1e5b8d);}for(let _0x411e66=-0xb+-0x19c9+0x19d4,_0x1024ae=_0xbd6fe4['length'];_0x411e66<_0x1024ae;_0x411e66++){_0x17b4e3+='%'+('00'+_0xbd6fe4['charCodeAt'](_0x411e66)['toString'](0xd3b+-0x9cd*-0x1+0x1c*-0xd2))['slice'](-(-0x1*-0x656+0x1b3a+-0x218e));}return decodeURIComponent(_0x17b4e3);};_0x3a5b['NGJCHc']=_0x1de784,_0x21c8dd=arguments,_0x3a5b['FgddNK']=!![];}const _0xe2dcfb=_0x545d09[-0x1db7+-0x2584+0x433b],_0x76f27c=_0xfb817c+_0xe2dcfb,_0x1dc55c=_0x21c8dd[_0x76f27c];return!_0x1dc55c?(_0x55880d=_0x3a5b['NGJCHc'](_0x55880d),_0x21c8dd[_0x76f27c]=_0x55880d):_0x55880d=_0x1dc55c,_0x55880d;},_0x3a5b(_0x21c8dd,_0x317756);}_0x4207f7[_0x1d423c(-0x10d,-0x118,-0x102,-0x105)]='æ—¥å¸¸';function _0x196a(){const _0x1d1b1a=['CM4GDgHPCYiPka','nJm3mdK0wgfhCe9w','mtu2otu5mxrswxrqwG','y3rVCIGICMv0Dq','ChjVDg90ExbL','Aw5JBhvKzxm','mZu2z2jbyu5b','E30Uy29UC3rYDq','C3vIC3rYAw5N','nta0ntq2zLP6s2rl','DgfIBgu','mti2nZGYnJbcrMvlu2i','yMLUza','m2vhALrYBa','CMvWBgfJzq','Dvr4ufK','y29UC3rYDwn0BW','Dg9tDhjPBMC','z3ftvuG','yxbWBhK','oty1mJzduKvuEvu','y2f0zwDVCNK','DhjHy2u','mZaWndbHywjssMO','x19WCM90B19F','CMv0DxjUicHMDq','D2fYBG','BgvUz3rO','mZe4mZa5nLvgveflyW','zxjYB3i','BMn0Aw9UkcKG','z0LAz0G','DgL0Bgu','zxHJzxb0Aw9U','ndHLtffMthC','y29UC29Szq','y1HHsgu','DgLTzq','Aw5MBW'];_0x196a=function(){return _0x1d1b1a;};return _0x196a();}const ai=typeof autoDetectTag==='function'?autoDetectTag(t[_0x1d423c(-0xf3,-0xe7,-0x104,-0xfa)]+'\x20'+(t['desc']||'')):_0x4207f7;function _0x1d423c(_0x13131d,_0x17453f,_0x3ffb3a,_0x34254e){return _0x3a5b(_0x34254e- -0x225,_0x13131d);}return SORT_WEIGHTS[ai[_0x1d423c(-0x110,-0x115,-0x108,-0x105)]]||0x3*-0x243+-0x1*0xb9b+0x3973;
}
// åˆå§‹åŒ–æ—¶å¯¹æ‰€æœ‰å¤©æ•°çš„ä»»åŠ¡è¿›è¡Œæ’åº
tasksData.forEach(day => {
if(day.tasks && day.tasks.length > 0) {
day.tasks.sort((a, b) => getTaskScore(a) - getTaskScore(b));
}
});
/* --------------------------------------------------------- */
const PLAN_ID = 'cyber_v1_core';
const KEY_PROGRESS = 'df_prog_' + PLAN_ID;
const KEY_TITLE = 'df_title_' + PLAN_ID;
const KEY_DAY_IDX = 'df_day_idx_' + PLAN_ID;
const KEY_THEME = 'df_theme_' + PLAN_ID;
let userProgress = JSON.parse(localStorage.getItem(KEY_PROGRESS) || '{}');
let savedTitle = localStorage.getItem(KEY_TITLE);
if(savedTitle) planTitle = savedTitle;
let currentDayIdx = parseInt(localStorage.getItem(KEY_DAY_IDX)) || 0;
let currentTheme = localStorage.getItem(KEY_THEME) || 'A';
if (currentDayIdx >= tasksData.length) {
currentDayIdx = tasksData.length > 0 ? tasksData.length - 1 : 0;
localStorage.setItem(KEY_DAY_IDX, currentDayIdx);
}
let heatmapOffset = 0;
// --- æ ¸å¿ƒéŸ³é¢‘ç³»ç»Ÿé‡æ„ (ä¿®å¤åˆ·æ–°éŸ³æ•ˆ/è·¯å¾„é—®é¢˜) ---
const OSS_BASE = "https://deepflow-hellojyh-audio.oss-cn-hangzhou.aliyuncs.com";
const AUDIO_SYSTEM = {
    sfxEnabled: localStorage.getItem('cyber_sfx_enabled') !== 'false',
    pools: {
        check: [ OSS_BASE + "/audio/cyber/check.MP3", OSS_BASE + "/audio/cyber/check1.MP3", OSS_BASE + "/audio/cyber/check2.MP3", OSS_BASE + "/audio/cyber/check4.MP3" ],
        switch: [ OSS_BASE + "/audio/cyber/switch1.MP3", OSS_BASE + "/audio/cyber/switch2.MP3" ],
        finish: [ OSS_BASE + "/audio/cyber/finish1.MP3", OSS_BASE + "/audio/cyber/finish2.MP3" ]
    },
    cache: {},
    preload: function() {
        Object.keys(this.pools).forEach(key => {
            this.cache[key] = this.pools[key].map(src => { const audio = new Audio(); audio.src = src; audio.preload = 'auto'; audio.volume = 0.8; return audio; });
        });
        this.updateBtn();
    },
    toggle: function() {
        this.sfxEnabled = !this.sfxEnabled;
        localStorage.setItem('cyber_sfx_enabled', this.sfxEnabled);
        this.updateBtn();
        if(typeof showToast === 'function') showToast(this.sfxEnabled ? ">> ç•Œé¢éŸ³æ•ˆ: å·²å¼€å¯" : ">> ç•Œé¢éŸ³æ•ˆ: å·²é™éŸ³");
    },
    updateBtn: function() {
        const btn = document.getElementById('sfxToggleBtn');
        if(!btn) return;
        const icon = btn.querySelector('i');
        if(this.sfxEnabled) {
            btn.innerHTML = `<i data-lucide="volume-2" class="w-3 h-3"></i> ç•Œé¢éŸ³æ•ˆ: ON`;
            btn.style.opacity = "1";
            btn.style.borderColor = "var(--active-color)";
            btn.style.color = "var(--active-color)";
        } else {
            btn.innerHTML = `<i data-lucide="volume-x" class="w-3 h-3"></i> ç•Œé¢éŸ³æ•ˆ: OFF`;
            btn.style.opacity = "0.5";
            btn.style.borderColor = "#555";
            btn.style.color = "#555";
        }
        lucide.createIcons();
    },
    play: function(type) {
        if (!this.sfxEnabled) return; // ğŸ”´ é™éŸ³æ‹¦æˆª
        if (!this.cache[type]) return;
        const audios = this.cache[type];
        const audio = audios[Math.floor(Math.random() * audios.length)];
        audio.currentTime = 0;
        audio.play().catch(e => console.log('Audio fail', e));
    }
};
function toggleSFX() { AUDIO_SYSTEM.toggle(); }
AUDIO_SYSTEM.preload();
function init() {
document.documentElement.style.setProperty('--active-color', currentTheme === 'A' ? '#00f3ff' : '#00fff9');
document.body.className = currentTheme === 'A' ? 'theme-a' : 'theme-b';
document.getElementById(currentTheme==='A'?'core_A':'core_B').classList.remove('hidden-core');
document.getElementById(currentTheme==='A'?'core_B':'core_A').classList.add('hidden-core');
renderAll();
renderHeatmap();
setInterval(updateLog, 1500);
setTimeout(lucide.createIcons, 100);
// åˆå§‹åŒ–ä¸‹æ‹‰èœå•æ•°æ®
const mobSelect = document.getElementById('mobileDateSelect');
if(mobSelect) {
    mobSelect.innerHTML = ''; // æ¸…ç©ºæ—§é€‰é¡¹
    tasksData.forEach((task, index) => {
        const opt = document.createElement('option');
        opt.value = index;
        // èµ›åšé£æ ¼æ–‡æ¡ˆ: SECTOR 01 | 2077-01-01
        opt.text = `æ‰‡åŒº ${String(task.dayNum).padStart(2,'0')} | ${task.date}`;
        mobSelect.appendChild(opt);
    });
    mobSelect.value = currentDayIdx; // æ¢å¤é€‰ä¸­çŠ¶æ€
}
setTimeout(() => {
const tip = document.getElementById('dockTooltip');
if(tip) {
tip.classList.remove('show');
tip.style.opacity = '0';
tip.style.transform = 'translateY(-50%) translateX(10px)';
}
}, 4000);
}
function switchArchitecture() {
AUDIO_SYSTEM.play('switch');
const loader = document.getElementById('loader-layer');
const target = currentTheme === 'A' ? 'B' : 'A';
loader.className = 'show';
if (target === 'A') {
loader.innerHTML = `<div class="loader-mode-a"><div class="iris-aperture"><div class="iris-scan-line"></div><div class="iris-blade"></div><div class="iris-center"></div></div><div class="iris-text">ç”Ÿç‰©ç‰¹å¾è¯†åˆ«é€šè¿‡ // æ¥å…¥ç³»ç»Ÿ A</div></div>`;
} else {
loader.innerHTML = `<div class="loader-mode-b-neural"><div class="neural-hex"><div class="neural-hex-inner"></div></div><div class="neural-text">ç³»ç»Ÿé‡æ„ä¸­</div><div class="neural-sub">æ­£åœ¨è§£å¯†ç¥ç»å…ƒæ•°æ®...</div><div class="scan-beam"></div></div>`;
}
setTimeout(() => {
currentTheme = target;
localStorage.setItem(KEY_THEME, currentTheme);
document.documentElement.style.setProperty('--active-color', currentTheme === 'A' ? '#00f3ff' : '#00fff9');
document.body.className = currentTheme === 'A' ? 'theme-a' : 'theme-b';
document.getElementById(currentTheme==='A'?'core_A':'core_B').classList.remove('hidden-core');
document.getElementById(currentTheme==='A'?'core_B':'core_A').classList.add('hidden-core');
if(target === 'B') { updateLog(); renderHeatmap(); }
loader.classList.remove('show');
lucide.createIcons();
}, 2500);
}
function renderAll() {
lucide.createIcons();
document.getElementById('title_A').innerText = planTitle;
document.getElementById('title_B').innerText = planTitle;
const day = tasksData[currentDayIdx]; if(!day) return;
document.getElementById('dateStr_A').innerText = day.date; document.getElementById('dayNum_A').innerText = String(day.dayNum).padStart(2,'0');
renderListA(day); renderSidebarA(); updateStatsA(day);
document.getElementById('dateStr_B').innerText = day.date;
renderListB(day); updateStatsB(day);
updateGlobalSync(); lucide.createIcons();
// åŒæ­¥æ›´æ–°æ‰‹æœºä¸‹æ‹‰èœå•çš„å€¼
const mobSelect = document.getElementById('mobileDateSelect');
if(mobSelect) mobSelect.value = currentDayIdx;
}
function renderListA(day) {
const el = document.getElementById('list_A'); el.innerHTML = '';
day.tasks.forEach((t, i) => {
const uid = day.date + '_' + i; const checked = !!userProgress[uid];
const aiInfo = typeof autoDetectTag === 'function' ? autoDetectTag(t.title + " " + (t.desc||"")) : {category:'æ—¥å¸¸'};
const displayTag = t.tag || (aiInfo.category !== 'æ—¥å¸¸' ? aiInfo.label : '');
const aiPrefix = (aiInfo.emoji && aiInfo.category !== 'æ—¥å¸¸') ? `<span class="mr-2 opacity-80 text-cyan-200 text-xs">${aiInfo.emoji}</span>` : '';
let timeInfoHtml = '';
if (t.time || t.duration) {
timeInfoHtml = `<div class="task-data-line">`;
if (t.time) timeInfoHtml += `<span>â° ${t.time}</span>`;
if (t.duration) timeInfoHtml += `<span>â³ ${t.duration}M</span>`;
timeInfoHtml += `</div>`;
}
el.innerHTML += `
<div onclick="toggle('${uid}')" class="task-row cursor-pointer ${checked?'checked':''}">
<div class="a-checkbox-container"><div class="a-checkbox flex-shrink-0">${checked?'<i data-lucide="check" class="w-3 h-3 text-cyan-400"></i>':''}</div></div>
<div class="flex-1">
${timeInfoHtml}
<h4 class="text-white text-sm font-bold tracking-wide">${aiPrefix}${t.title}</h4>
<div class="flex items-center gap-2 mt-1">
${displayTag ? `<span class="text-[10px] bg-cyan-900/50 text-cyan-400 px-1 border border-cyan-800 tracking-wider">${displayTag.toUpperCase()}</span>` : ''}
<p class="text-xs text-gray-500 font-mono">${t.desc||'æš‚æ— æ•°æ®æè¿°'}</p>
</div>
</div>
</div>`;
});
}
function renderListB(day) {
const el = document.getElementById('list_B'); el.innerHTML = '';
day.tasks.forEach((t, i) => {
const uid = day.date + '_' + i; const checked = !!userProgress[uid];
const aiInfo = typeof autoDetectTag === 'function' ? autoDetectTag(t.title + " " + (t.desc||"")) : {category:'æ—¥å¸¸'};
const displayTag = t.tag || (aiInfo.category !== 'æ—¥å¸¸' ? aiInfo.label : '');
const aiPrefix = (aiInfo.emoji && aiInfo.category !== 'æ—¥å¸¸') ? `<span class="mr-2 text-purple-300 text-lg opacity-80">${aiInfo.emoji}</span>` : '';
let timeInfoHtml = '';
if (t.time || t.duration) {
timeInfoHtml = `<div class="b-task-data-line">`;
if (t.time) timeInfoHtml += `<span class="flex items-center gap-1"><i data-lucide="clock" class="w-3 h-3"></i> ${t.time}</span>`;
if (t.duration) timeInfoHtml += `<span class="flex items-center gap-1"><i data-lucide="hourglass" class="w-3 h-3"></i> ${t.duration}M</span>`;
timeInfoHtml += `</div>`;
}
el.innerHTML += `
<div onclick="toggle('${uid}')" class="b-task-item ${checked?'checked':''}">
<div class="flex-shrink-0 w-6 h-6 border border-cyan-400 flex items-center justify-center bg-black text-pink-500 font-bold">${checked?'X':''}</div>
<div class="flex-1">
${timeInfoHtml}
<h4 class="text-white font-['Rajdhani'] text-xl ${checked?'line-through text-gray-500':''}">${aiPrefix}${t.title}</h4>
<div class="text-xs text-cyan-600 font-mono flex gap-2 items-center">
${displayTag ? `<span class="text-purple-400 font-bold">[${displayTag.toUpperCase()}]</span>` : ''}
// ${t.desc||'NO_DATA'}
</div>
</div>
</div>`;
});
}
function renderSidebarA() {
const el = document.getElementById('sidebar_A'); el.innerHTML = '';
tasksData.forEach((d, i) => {
const active = i === currentDayIdx;
const isAllDone = d.tasks.length > 0 && d.tasks.every((_, tIdx) => userProgress[d.date + '_' + tIdx]);
const dateLabel = d.date.substring(5).replace('-', '.');
let completeIcon = '';
let extraClass = '';
if (isAllDone) {
completeIcon = `<i data-lucide="crosshair" class="w-3 h-3 text-cyan-400 animate-pulse"></i>`;
extraClass = 'completed-day';
} else if (active) {
completeIcon = `<i data-lucide="chevron-left" class="w-3 h-3"></i>`;
}
el.innerHTML += `
<div onclick="gotoDay(${i})" class="nav-item ${active?'active':''} ${extraClass}">
<div class="flex items-center gap-3">
<span>DAY ${String(d.dayNum).padStart(2,'0')}</span>
<span class="text-[10px] font-mono opacity-60 ml-1 tracking-tighter">[${dateLabel}]</span>
</div>
<div>${completeIcon}</div>
</div>`;
});
}
function renderHeatmap() {
const el = document.getElementById('heatmap_B'); if(!el) return;
el.innerHTML = '';
const start = heatmapOffset * 28;
const end = Math.min(start + 28, tasksData.length);
for(let i=start; i<end; i++) {
const day = tasksData[i];
const done = day.tasks.length > 0 && day.tasks.every((_, ti) => userProgress[day.date+'_'+ti]);
const isCurrent = i === currentDayIdx;
let cls = "heatmap-cell";
let style = "";
if(done) {
cls += " active";
const neonColor = NEON_PALETTE[i % NEON_PALETTE.length];
style = `background:${neonColor}; box-shadow:0 0 15px ${neonColor}; border-color:#fff;`;
}
if(isCurrent) cls += " current";
el.innerHTML += `<div class="${cls}" style="${style}" onclick="gotoDay(${i}); showToast('æ­£åœ¨è®¿é—®æ‰‡åŒº: ${day.date}')" title="${day.date}"></div>`;
}
for(let i=end; i<start+28; i++) { el.innerHTML += `<div class="heatmap-cell" style="background:#111; cursor:default"></div>`; }
document.getElementById('heatmap_page').innerText = `ç¬¬ ${heatmapOffset+1} é¡µ`;
}
function heatmapPage(d) { const max=Math.ceil(tasksData.length/28)-1; heatmapOffset+=d; if(heatmapOffset<0)heatmapOffset=0; if(heatmapOffset>max)heatmapOffset=max; renderHeatmap(); }
// === [Cyber ä¿®å¤ï¼šé˜²é—ªçƒé€»è¾‘] ===
    let cyberToastTimer = null;

    function showToast(msg) { 
        const t = document.getElementById('holo-toast'); 
        if(!t) return;
        
        // 1. æ¸…é™¤æ—§å®šæ—¶å™¨ (å…³é”®)
        if (cyberToastTimer) clearTimeout(cyberToastTimer);

        // 2. æ›´æ–°å†…å®¹
        t.innerText = msg; 
        
        // 3. å¼ºåˆ¶æ˜¾ç¤º
        t.classList.add('show'); 
        
        // 4. é‡ç½®å€’è®¡æ—¶
        cyberToastTimer = setTimeout(() => { 
            t.classList.remove('show'); 
            cyberToastTimer = null;
        }, 2000); 
    }
function updateLog() {
const el = document.getElementById('sys_log_B');
if(currentTheme === 'B' && el) {
const logs = ["> å»¶è¿Ÿ: 14ms", "> æ•°æ®åŒ…æ¥æ”¶å®Œæ¯•", "> å†…å­˜æ•´ç†å®Œæˆ", "> åŠ å¯†è¿æ¥å»ºç«‹"];
el.innerHTML += `<br>${logs[Math.floor(Math.random()*logs.length)]}`;
el.scrollTop = el.scrollHeight;
}
const ram = document.getElementById('ram_B'); if(ram) ram.innerText = (Math.random()*6+4).toFixed(2) + "GB";
}
// --- æ ¸å¿ƒä¿®å¤ï¼šç‹¬ç«‹éŸ³é¢‘é€»è¾‘ï¼Œç§»é™¤æ¸²æŸ“æ—¶è‡ªåŠ¨æ’­æ”¾ ---
function toggle(uid) {
const isChecking = !userProgress[uid]; // åˆ¤æ–­æ˜¯æ‰“å‹¾è¿˜æ˜¯å–æ¶ˆ
if(userProgress[uid]) delete userProgress[uid];
else userProgress[uid] = true;
localStorage.setItem(KEY_PROGRESS, JSON.stringify(userProgress));
// è®¡ç®—éŸ³é¢‘é€»è¾‘
const dayDate = uid.split('_')[0];
const dayObj = tasksData.find(d => d.date === dayDate);
if (isChecking && dayObj) {
const total = dayObj.tasks.length;
const doneCount = dayObj.tasks.filter((_, i) => userProgress[dayDate+'_'+i]).length;
if (total > 0 && doneCount === total) {
AUDIO_SYSTEM.play('finish');
} else {
AUDIO_SYSTEM.play('check');
}
}
renderAll(); renderHeatmap();
}
function updateStatsA(day) {
const total=day.tasks.length; const done=day.tasks.filter((_,i)=>userProgress[day.date+'_'+i]).length;
const pct = total ? (done/total) : 0;
const cellContainer = document.getElementById('energy_bar_A');
cellContainer.innerHTML = '';
const cellCount = 20; const filledCount = Math.floor(pct * cellCount);
for(let i=0; i<cellCount; i++) {
const d = document.createElement('div');
d.className = `energy-cell ${i < filledCount ? 'active' : ''}`;
cellContainer.appendChild(d);
}
document.getElementById('progressText_A').innerText = `${done}/${total} å•å…ƒ`;
document.getElementById('sync_A').innerText = Math.round(pct*100) + '%';
// çº¯è§†è§‰é€»è¾‘ï¼Œä¸æ’­æ”¾å£°éŸ³
const stamp = document.getElementById('stamp_A');
if(done===total && total>0) {
stamp.classList.remove('opacity-10','grayscale','scale-95'); stamp.classList.add('opacity-100','scale-100'); stamp.style.filter = "drop-shadow(0 0 20px #00f3ff)";
} else {
stamp.classList.add('opacity-10','grayscale','scale-95'); stamp.classList.remove('opacity-100','scale-100'); stamp.style.filter = "none";
}
}
function updateStatsB(day) {
const total=day.tasks.length; const done=day.tasks.filter((_,i)=>userProgress[day.date+'_'+i]).length;
const pct = total ? Math.round((done/total)*100) : 0;
document.getElementById('bar_B').style.width = pct + '%';
document.getElementById('sync_B').innerText = pct + '%';
}
function updateGlobalSync() {
let t=0, d=0; tasksData.forEach(day => day.tasks.forEach((_, i) => { t++; if(userProgress[day.date+'_'+i]) d++; }));
const pct = t ? Math.round((d/t)*100) : 0; document.getElementById('sync_A').innerText = pct + '%';
}
function changeDay(d) {
const n = currentDayIdx+d;
if(n>=0 && n<tasksData.length) {
currentDayIdx = n;
localStorage.setItem(KEY_DAY_IDX, currentDayIdx);
renderAll();
renderHeatmap();
}
}
function gotoDay(i) {
currentDayIdx = i;
localStorage.setItem(KEY_DAY_IDX, currentDayIdx);
renderAll();
renderHeatmap();
}
function openRenameModal() {
const m=document.getElementById('modalOverlay');
document.getElementById('modalTitle').innerText="é‡å‘½åç³»ç»Ÿ (RENAME)";
document.getElementById('modalDesc').innerText="è¯·è¾“å…¥æ–°çš„è®¡åˆ’åç§°:";
const i=document.getElementById('modalInput');
i.style.display='block'; i.value=planTitle;
document.getElementById('modalBtnConfirm').onclick=()=>{
if(i.value){
planTitle=i.value;
localStorage.setItem(KEY_TITLE, planTitle);
renderAll();
closeModal();
}
};
m.classList.add('show');
}
function openResetModal() {
const m=document.getElementById('modalOverlay');
document.getElementById('modalTitle').innerText="ç³»ç»Ÿé‡ç½® (RESET)";
document.getElementById('modalDesc').innerText="è­¦å‘Šï¼šç¡®è®¤æ¸…é™¤æ‰€æœ‰è¿›åº¦æ•°æ®ï¼Ÿæ­¤æ“ä½œä¸å¯é€†ã€‚";
document.getElementById('modalInput').style.display='none';
document.getElementById('modalBtnConfirm').onclick=()=>{
localStorage.removeItem(KEY_PROGRESS);
localStorage.removeItem(KEY_DAY_IDX);
localStorage.removeItem(KEY_THEME);
userProgress = {};
currentDayIdx = 0;
currentTheme = 'A';
renderAll();
closeModal();
showToast("ç³»ç»Ÿé‡ç½®å®Œæ¯•");
document.documentElement.style.setProperty('--active-color', '#00f3ff');
document.body.className = 'theme-a';
document.getElementById('core_A').classList.remove('hidden-core');
document.getElementById('core_B').classList.add('hidden-core');
};
m.classList.add('show');
}
function closeModal() { document.getElementById('modalOverlay').classList.remove('show'); }
let timer=null, timeLeft=1500, isRun=false;
const dockWrapper = document.getElementById('globalDockWrapper');
const orb = document.getElementById('dockOrb');
let isDrag = false, startX, startY;
orb.addEventListener('mousedown', (e) => {
if(e.target.closest('#dockPanel')) return;
isDrag = false; startX = e.clientX; startY = e.clientY;
let rect = dockWrapper.getBoundingClientRect();
let offX = rect.left, offY = rect.top;
dockWrapper.style.transition = 'none';
const onMove = (ev) => {
if(Math.abs(ev.clientX - startX) > 5 || Math.abs(ev.clientY - startY) > 5) {
isDrag = true;
dockWrapper.style.left = (offX + ev.clientX - startX) + 'px';
dockWrapper.style.top = (offY + ev.clientY - startY) + 'px';
dockWrapper.style.right = 'auto'; dockWrapper.style.bottom = 'auto';
}
};
const onUp = () => {
document.removeEventListener('mousemove', onMove); document.removeEventListener('mouseup', onUp);
dockWrapper.style.transition = 'all 0.4s cubic-bezier(0.25, 1, 0.5, 1)';
if(!isDrag) { toggleDock(); } else { snapDock(); }
};
document.addEventListener('mousemove', onMove); document.addEventListener('mouseup', onUp);
});
function snapDock() {
const rect = dockWrapper.getBoundingClientRect();
const winW = window.innerWidth; const winH = window.innerHeight;
const SNAP_THRESHOLD = 100; const MARGIN = 32;
let targetLeft = rect.left; let targetTop = rect.top;
if (rect.left < SNAP_THRESHOLD) targetLeft = MARGIN;
else if (winW - rect.right < SNAP_THRESHOLD) targetLeft = winW - rect.width - MARGIN;
if (rect.top < SNAP_THRESHOLD) targetTop = MARGIN;
else if (winH - rect.bottom < SNAP_THRESHOLD) targetTop = winH - rect.height - MARGIN;
dockWrapper.style.left = `${Math.max(MARGIN, Math.min(winW - rect.width - MARGIN, targetLeft))}px`;
dockWrapper.style.top = `${Math.max(MARGIN, Math.min(winH - rect.height - MARGIN, targetTop))}px`;
}
function updatePanelPosition() {
const rect = dockWrapper.getBoundingClientRect();
const panel = document.getElementById('dockPanel');
const winH = window.innerHeight; const winW = window.innerWidth;
panel.style.top = ''; panel.style.bottom = ''; panel.style.left = ''; panel.style.right = '';
panel.style.transformOrigin = '';
if (rect.top > winH / 2) { panel.style.bottom = '85px'; panel.style.transformOrigin = 'bottom '; } else { panel.style.top = '85px'; panel.style.transformOrigin = 'top '; }
if (rect.left > winW / 2) { panel.style.right = '0'; panel.style.transformOrigin += 'right'; } else { panel.style.left = '0'; panel.style.transformOrigin += 'left'; }
}
function toggleDock() {
const panel = document.getElementById('dockPanel');
if (!panel.classList.contains('open')) { updatePanelPosition(); }
panel.classList.toggle('open');
}
function showTimeInput() { document.getElementById('timeInputRow').style.display='flex'; document.getElementById('customTimeInput').focus(); }
function submitTime() { const v=document.getElementById('customTimeInput').value; let m=parseInt(v)||25; if(m>120)m=120; setTime(m); document.getElementById('timeInputRow').style.display='none'; }
function adjTime(v) { if(!isRun) { let m=Math.floor(timeLeft/60)+v; if(m<1)m=1; setTime(m); } }
function setTime(m) { if(!isRun) { timeLeft=m*60; updateUI(); } }
function toggleTimer() { if(isRun){ clearInterval(timer); isRun=false; } else { isRun=true; AUDIO_SYSTEM.play('switch'); timer=setInterval(()=>{ if(timeLeft>0) { timeLeft--; updateUI(); } else finishTimer(); }, 1000); } updateUI(); }
function finishTimer() { clearInterval(timer); isRun=false; AUDIO_SYSTEM.play('finish'); alert("DONE"); updateUI(); }
function updateUI() {
const m=Math.floor(timeLeft/60).toString().padStart(2,'0'), s=(timeLeft%60).toString().padStart(2,'0');
document.getElementById('dockTime').innerText=`${m}:${s}`;
document.getElementById('immTime').innerText=`${m}:${s}`;
document.getElementById('timerBtn').innerText=isRun?'æš‚åœ (PAUSE)':'å¯åŠ¨ (START)';
const immBtn = document.getElementById('immPlayBtn');
if(immBtn) {
if(isRun) {
immBtn.innerHTML = `<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>`;
} else {
immBtn.innerHTML = `<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"/></svg>`;
}
}
}
function enterImmersive() { document.getElementById('immersiveLayer').classList.add('active'); initMatrix(); document.getElementById('dockPanel').classList.remove('open'); updateUI(); }
function exitImmersive() { document.getElementById('immersiveLayer').classList.remove('active'); }
function initMatrix() {
const c = document.getElementById('immMatrix'); c.innerHTML='';
const w = window.innerWidth;
for(let i=0; i<Math.floor(w/20); i++) {
const d = document.createElement('div');
d.style.cssText = `position:absolute; top:-100px; left:${i*20}px; color:${currentTheme==='A'?'#00f3ff':'#00fff9'}; writing-mode:vertical-rl; font-family:monospace; animation:fall ${Math.random()*2+2}s linear infinite`;
d.innerText = Math.random().toString(2).substring(2);
c.appendChild(d);
}
}
document.head.insertAdjacentHTML("beforeend", `<style>@keyframes fall { to { transform: translateY(110vh); } }</style>`)
window.addEventListener('DOMContentLoaded', init);
</script>
<div id="noiseDockWrapper" style="position: fixed; bottom: 100px; left: 20px; z-index: 100000; touch-action: none;">
    <div id="noiseOrb" style="width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: grab; transition: transform 0.1s; position: relative; z-index: 20002;">
        <i data-lucide="headphones" class="w-6 h-6 pointer-events-none relative z-10"></i>
        <div class="cyber-ring cyber-ring-1"></div>
        <div class="cyber-ring cyber-ring-2"></div>
    </div>
    
    <div id="noisePanel" style="position: absolute; bottom: 0; width: 260px; padding: 20px; border-radius: 2px; display: none; opacity: 0; transition: all 0.3s; z-index: 20001;">
        <div class="flex justify-between items-center mb-4">
            <div class="flex items-center gap-2">
                <span class="text-[10px] font-bold uppercase tracking-widest opacity-60">å£°æ™¯ç³»ç»Ÿ</span>
                <button id="sfxToggleBtn" onclick="toggleSFX()" class="text-[9px] border border-current px-2 py-0.5 text-cyan-400 hover:bg-cyan-900/50 transition font-mono tracking-wider flex items-center gap-1">
                    <i data-lucide="volume-2" class="w-3 h-3"></i> UIéŸ³æ•ˆ
                </button>
            </div>
            <input type="range" min="0" max="1" step="0.1" value="0.6" oninput="changeNoiseVolume(this.value)" class="w-20 h-1 rounded-lg appearance-none bg-gray-500/30 cursor-pointer accent-current">
        </div>
        
        <div class="grid grid-cols-4 gap-3 mb-4">
            <div class="noise-card relative" onclick="playNoise('rain')"><i data-lucide="cloud-rain"></i></div>
            <div class="noise-card relative" onclick="playNoise('ocean')"><i data-lucide="waves"></i></div>
            <div class="noise-card relative" onclick="playNoise('forest')"><i data-lucide="trees"></i></div>
            <div class="noise-card relative" onclick="playNoise('fire')"><i data-lucide="flame"></i></div>
            <div class="noise-card relative" onclick="playNoise('cafe')"><i data-lucide="coffee"></i></div>
            <div class="noise-card relative" onclick="playNoise('train')"><i data-lucide="train"></i></div>
            <div class="noise-card relative" onclick="playNoise('night')"><i data-lucide="moon"></i></div>
            <div class="noise-card relative" onclick="playNoise('keyboard')"><i data-lucide="keyboard"></i></div>
        </div>
        
        <button id="noiseStopBtn" onclick="stopAllNoise()" class="w-full text-xs py-2 font-bold opacity-60 hover:opacity-100 transition border border-current flex items-center justify-center gap-2">
            <i data-lucide="square" class="w-3 h-3"></i> åˆ‡æ–­ä¿¡å· (CUT_SIGNAL)
        </button>
    </div>
</div>

<script>
    // --- 1. éŸ³é¢‘å¼•æ“ ---
    // === [Cyber JS å‡çº§ï¼šæ”¯æŒæš‚åœ/ç»§ç»­] ===
    const NOISE_BASE = "https://deepflow-hellojyh-audio.oss-cn-hangzhou.aliyuncs.com/audio/ambience/";
    
    const noiseConfig = {
        'rain': [ {n:'éœ“è™¹é›¨å¤œ', f:'rain.mp3'}, {n:'é›·æš´è½°é¸£', f:'rain_2.mp3'}, {n:'æ¶“æ¶“é›¨æ»´', f:'rain_3.mp3'} ],
        'ocean': [ {n:'æ•°æ®ä¹‹æµ·', f:'ocean.mp3'}, {n:'æ·±æ½œæ¨¡å¼', f:'ocean.mp3?v=2'} ],
        'forest': [ {n:'å…¨æ¯æ£®æ—', f:'forest.mp3'}, {n:'ç”µå­è‰é¸£', f:'forest.mp3?v=2'}, {n:'æ•…éšœé£å£°', f:'forest.mp3?v=3'} ],
        'fire': [ {n:'æ•°å­—ç¯ç«', f:'fire.mp3'} ],
        'cafe': [ {n:'ç½‘ç»œç»ˆç«¯', f:'cafe.mp3'} ],
        'train': [ {n:'è¶…å¯¼åˆ—è½¦', f:'train.mp3'} ],
        'night': [ {n:'å¤œä¹‹åŸ', f:'night.mp3'} ],
        'keyboard': [ {n:'é»‘å®¢å…¥ä¾µ', f:'keyboard.mp3'} ]
    };
    
    let currentCat = null; let currentVarIdx = 0; let currentAudio = null; let masterVol = 0.6;
    let isPaused = false;

    function playNoise(cat) {
        // ç‚¹å‡»å½“å‰å·²æš‚åœçš„ -> æ¢å¤ä¿¡å·
        if (currentCat === cat && isPaused) {
            togglePlayback();
            return;
        }
        if (currentCat === cat) currentVarIdx = (currentVarIdx + 1) % noiseConfig[cat].length;
        else { currentCat = cat; currentVarIdx = 0; }
        
        loadAndPlay();
    }

    function loadAndPlay() {
        if(currentAudio) currentAudio.pause();
        const item = noiseConfig[currentCat][currentVarIdx];
        
        currentAudio = new Audio(NOISE_BASE + item.f); 
        currentAudio.loop = true; currentAudio.volume = masterVol;
        currentAudio.play().catch(e=>console.log(e));
        
        isPaused = false;
        updateNoiseUI();
        showToast(">> ä¿¡å·æ¥å…¥: " + item.n); 
    }

    function togglePlayback() {
        if (!currentAudio && !currentCat) return;
        const item = noiseConfig[currentCat][currentVarIdx];

        if (isPaused) {
            currentAudio.play();
            isPaused = false;
            showToast(">> ä¿¡å·æ¢å¤: " + item.n);
        } else {
            currentAudio.pause();
            isPaused = true;
        }
        updateNoiseUI();
    }

    function stopAllNoise() { togglePlayback(); }

    function changeNoiseVolume(v) { masterVol = v; if(currentAudio) currentAudio.volume = masterVol; }

    function updateNoiseUI() {
        const orb = document.getElementById('noiseOrb');
        const btn = document.getElementById('noiseStopBtn');
        
        // 1. èƒ½é‡ç¯ï¼šæ’­æ”¾æ—¶æ—‹è½¬
        if(currentCat && !isPaused) orb.classList.add('is-playing');
        else orb.classList.remove('is-playing');
        
        // 2. æŒ‰é’®çŠ¶æ€ (ä¿®æ­£ç‰ˆ)
        if (!currentCat) {
            // [æ— ä¿¡å·]
            btn.className = "w-full text-xs py-2 font-bold opacity-60 hover:opacity-100 transition border border-current flex items-center justify-center gap-2";
            btn.innerHTML = `<i data-lucide="radio" class="w-3 h-3"></i> ç­‰å¾…è¾“å…¥ (WAITING)`;
        } else if (isPaused) {
            // [æš‚åœ]ï¼šæš— (ä½åŠŸè€—æ¨¡å¼)
            btn.classList.remove('stop-active');
            btn.style.opacity = "0.6";
            btn.style.boxShadow = "none";
            btn.innerHTML = `<i data-lucide="play" class="w-3 h-3"></i> æ¢å¤è¿æ¥ (RESUME)`;
        } else {
            // [æ’­æ”¾ä¸­]ï¼šäº® (å…¨åŠŸç‡è¾“å‡º)
            btn.classList.add('stop-active');
            btn.style.opacity = "1";
            btn.innerHTML = `<i data-lucide="pause" class="w-3 h-3"></i> æš‚åœä¼ è¾“ (PAUSE)`;
        }

        // 3. å¡ç‰‡é«˜äº®
        document.querySelectorAll('.noise-card').forEach(el => {
            el.classList.remove('active');
            const oldB = el.querySelector('.variant-badge'); if(oldB) oldB.remove();
            if(el.getAttribute('onclick').includes(`'${currentCat}'`)) {
                el.classList.add('active');
                if(noiseConfig[currentCat].length > 1) {
                    el.insertAdjacentHTML('beforeend', `<span class="variant-badge">${currentVarIdx+1}</span>`);
                }
            }
        });
        lucide.createIcons();
    }
    setTimeout(updateNoiseUI, 500);
    // --- 2. ç‰©ç†æ‹–æ‹½ä¸å¸é™„å¼•æ“ (ä¿®å¤ç‰ˆï¼šæ™ºèƒ½é¿è®©) ---
    const nWrapper = document.getElementById('noiseDockWrapper');
    const nOrb = document.getElementById('noiseOrb');
    const nPanel = document.getElementById('noisePanel');
    
    let noise_isDragging = false;
    let noise_hasMoved = false; 
    let noise_startX, noise_startY, noise_initialLeft, noise_initialTop;

    // ç»‘å®šäº‹ä»¶
    nOrb.addEventListener('mousedown', noiseDragStart);
    nOrb.addEventListener('touchstart', noiseDragStart, {passive: false});

    function noiseDragStart(e) {
        if(e.target.closest('#noisePanel')) return;

        noise_isDragging = true;
        noise_hasMoved = false;
        
        const clientX = e.type.includes('mouse') ? e.clientX : e.touches[0].clientX;
        const clientY = e.type.includes('mouse') ? e.clientY : e.touches[0].clientY;
        
        noise_startX = clientX;
        noise_startY = clientY;
        
        const rect = nWrapper.getBoundingClientRect();
        noise_initialLeft = rect.left;
        noise_initialTop = rect.top;
        
        nWrapper.style.transition = 'none'; 
        nOrb.style.cursor = 'grabbing';
        nOrb.style.transform = 'scale(0.95)';

        document.addEventListener('mousemove', noiseDragMove);
        document.addEventListener('touchmove', noiseDragMove, {passive: false});
        document.addEventListener('mouseup', noiseDragEnd);
        document.addEventListener('touchend', noiseDragEnd);
    }

    function noiseDragMove(e) {
        if (!noise_isDragging) return;
        e.preventDefault(); 

        const clientX = e.type.includes('mouse') ? e.clientX : e.touches[0].clientX;
        const clientY = e.type.includes('mouse') ? e.clientY : e.touches[0].clientY;
        
        const dx = clientX - noise_startX;
        const dy = clientY - noise_startY;

        if (Math.abs(dx) > 3 || Math.abs(dy) > 3) {
            noise_hasMoved = true;
            // æ‹–æ‹½æ—¶è‡ªåŠ¨æ”¶èµ·é¢æ¿ï¼Œé˜²æ­¢æŒ¡è§†é‡
            if(nPanel.style.display !== 'none') {
                nPanel.style.opacity = '0';
                nPanel.style.pointerEvents = 'none';
                setTimeout(() => { nPanel.style.display = 'none'; }, 200);
            }
        }

        nWrapper.style.left = `${noise_initialLeft + dx}px`;
        nWrapper.style.top = `${noise_initialTop + dy}px`;
        nWrapper.style.bottom = 'auto'; 
    }

    function noiseDragEnd() {
        if (!noise_isDragging) return;
        noise_isDragging = false;
        nOrb.style.cursor = 'grab';
        nOrb.style.transform = 'scale(1)';

        document.removeEventListener('mousemove', noiseDragMove);
        document.removeEventListener('touchmove', noiseDragMove);
        document.removeEventListener('mouseup', noiseDragEnd);
        document.removeEventListener('touchend', noiseDragEnd);

        if (noise_hasMoved) {
            // å¸é™„é€»è¾‘ï¼šæ¾æ‰‹åè‡ªåŠ¨è´´è¾¹
            const winW = window.innerWidth;
            const winH = window.innerHeight;
            const rect = nWrapper.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            
            nWrapper.style.transition = 'all 0.4s cubic-bezier(0.25, 1, 0.5, 1)';
            
            let targetLeft;
            // å·¦å³å¸é™„
            if (centerX < winW / 2) {
                targetLeft = 20; 
            } else {
                targetLeft = winW - 70; // 50pxå®½ + 20pxè·
            }
            
            // ä¸Šä¸‹è¾¹ç•Œé™åˆ¶
            let targetTop = rect.top;
            if (targetTop < 50) targetTop = 50;
            if (targetTop > winH - 100) targetTop = winH - 100;

            nWrapper.style.left = `${targetLeft}px`;
            nWrapper.style.top = `${targetTop}px`;
            
        } else {
            // ç‚¹å‡»äº‹ä»¶ï¼šè§¦å‘æ™ºèƒ½å±•å¼€
            toggleNoisePanel();
        }
    }

    // === æ ¸å¿ƒä¿®å¤ï¼šæ™ºèƒ½é¿è®©å±•å¼€é€»è¾‘ ===
    function toggleNoisePanel() {
        const isOpen = nPanel.style.display === 'block' && nPanel.style.opacity !== '0';
        
        if (isOpen) {
            // å…³é—­é€»è¾‘
            nPanel.style.opacity = '0';
            nPanel.style.transform = 'scale(0.9)';
            setTimeout(() => { nPanel.style.display = 'none'; }, 200);
        } else {
            // å¼€å¯é€»è¾‘
            nPanel.style.display = 'block';
            nPanel.style.pointerEvents = 'auto';
            
            // 1. è·å–ä½ç½®ä¿¡æ¯
            const wrapperRect = nWrapper.getBoundingClientRect();
            const winW = window.innerWidth;
            const winH = window.innerHeight;
            
            // 2. æ¸…é™¤æ—§å®šä½
            nPanel.style.top = ''; nPanel.style.bottom = '';
            nPanel.style.left = ''; nPanel.style.right = '';
            
            // 3. æ™ºèƒ½åˆ¤æ–­æ°´å¹³æ–¹å‘ (å·¦/å³)
            // å¦‚æœçƒåœ¨å±å¹•å³åŠè¾¹ï¼Œé¢æ¿å¾€å·¦å¼¹ï¼›åä¹‹å¾€å³å¼¹
            if (wrapperRect.left > winW / 2) {
                nPanel.style.right = '0px';  // å¯¹é½å³ä¾§
                nPanel.style.transformOrigin = 'bottom right'; 
            } else {
                nPanel.style.left = '0px';   // å¯¹é½å·¦ä¾§
                nPanel.style.transformOrigin = 'bottom left'; 
            }

            // 4. æ™ºèƒ½åˆ¤æ–­å‚ç›´æ–¹å‘ (ä¸Š/ä¸‹)
            // å¦‚æœçƒåœ¨å±å¹•ä¸‹åŠè¾¹ï¼Œé¢æ¿å¾€ä¸Šå¼¹ï¼›åä¹‹å¾€ä¸‹å¼¹
            if (wrapperRect.top > winH / 2) {
                nPanel.style.bottom = '65px'; // å‘ä¸Šå±•å¼€
                nPanel.style.transformOrigin = nPanel.style.transformOrigin.replace('top', 'bottom');
            } else {
                nPanel.style.top = '65px';    // å‘ä¸‹å±•å¼€
                nPanel.style.transformOrigin = nPanel.style.transformOrigin.replace('bottom', 'top');
            }

            // 5. è§¦å‘åŠ¨ç”»
            nPanel.offsetHeight; // å¼ºåˆ¶é‡ç»˜
            nPanel.style.opacity = '1';
            nPanel.style.transform = 'scale(1)';
        }
    }
    
    // åˆå§‹åŒ–å›¾æ ‡
    setTimeout(lucide.createIcons, 500);
</script>
</body>
</html>